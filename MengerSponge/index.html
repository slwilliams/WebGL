<html>
  <head>
    <script type='text/javascript' src='../lib/jquery-1.8.3.min.js'></script>
    <script type='text/javascript' src='../lib/Three.js'></script>
    <script type='text/javascript' src='../lib/OrbitAndPanControls.js'></script>
  </head>
  <body>
    <script>
      var camera, scene, renderer, cube;
      var cameraControls;

      var clock = new THREE.Clock();

      function fillScene()
      {
        scene = new THREE.Scene();

        var geometry = new THREE.CubeGeometry(100,100,100);

        var material = new THREE.MeshLambertMaterial({color: 0x0000FF});
       
        cube = new THREE.Mesh(geometry, material);
        cube.overdraw = true;
        scene.add(cube);

        var ambLight = new THREE.AmbientLight(0x000044);
        scene.add(ambLight);

        var directionalLight = new THREE.DirectionalLight(0xffffff);
        directionalLight.position.set(1, 1, 1).normalize();
        scene.add(directionalLight);
      }

      function init() 
      {
        var canvasWidth = window.innerWidth;
        var canvasHeight = window.innerHeight;
        var canvasRatio = canvasWidth / canvasHeight;

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.gammaInput = true;
        renderer.gammaOutput = true;
        renderer.setSize(canvasWidth, canvasHeight);
        renderer.setClearColorHex(0xAAAAAA, 1.0);

        camera = new THREE.PerspectiveCamera(55, canvasRatio, 2, 9000);
        camera.position.set(10, 5, 400);
      
        cameraControls = new THREE.OrbitAndPanControls(camera, renderer.domElement);
        cameraControls.target.set(0,0,0);

      }

      function addToDOM() 
      {  
        document.body.appendChild(renderer.domElement);
      }

      function animate() 
      {
        window.requestAnimationFrame(animate);
        render();
      }

      function render()
      {
        var delta = clock.getDelta();

        cube.rotation.y += 0.02;
        cube.rotation.x += 0.01;
        
        cameraControls.update(delta);
        renderer.render(scene, camera);
      }

      try 
      {
        init();
        fillScene();
        addToDOM();
        animate();
      } 
      catch(e)
      {
        var errorReport = "Your program encountered an unrecoverable error, can not draw on canvas. Error was:<br/><br/>";
        $('#container').append(errorReport+e);
      }
    </script>
  </body>
</html>
